const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DoorUI-C-uGVzmv.js","assets/index-DgpGgCCf.js","assets/index-DWpnJaI2.css","assets/ScratchReveal-BbIMmHZX.js","assets/DumplingFillingUI-C8hTqcWH.js","assets/modifiers.esm-DDE0KLJq.js","assets/DumplingGivingUI-C3oOW_my.js","assets/LoveLanguagesUI-CWzqh-7V.js","assets/StoryEndPage-CxfpQYFT.js"])))=>i.map(i=>d[i]);
import{u as re,a as ie,r as l,j as r,N as oe,A as F,m as W,_ as o,R as j,b as ae}from"./index-DgpGgCCf.js";const X=l.createContext(void 0),ce=({children:e})=>{const t=re(),n=ie(),s=parseInt(n.pageNumber??"0",10),u=32,[p,d]=l.useState(!0),[f,h]=l.useState(!0),[E,i]=l.useState(0),a=()=>{p&&s<u&&(i(1),t(`/read/${s+1}`)),s===u&&t("/read/end")},c=()=>{f&&s>0&&(i(-1),t(`/read/${s-1}`))},g=_=>{d(_)},v=_=>{h(_)};return r.jsx(X.Provider,{value:{handleNext:a,handleBack:c,nextIsActive:p,backIsActive:f,currentPage:s,numPages:u,toggleNext:g,toggleBack:v,direction:E},children:e})},I=()=>{const e=l.useContext(X);if(!e)throw new Error("useReadContext must be used within a ReadContextProvider");return e},ue="Left",le="Right",ge="Up",pe="Down",w={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},N={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},k="mousemove",U="mouseup",_e="touchend",de="touchmove",fe="touchstart";function me(e,t,n,s){return e>t?n>0?le:ue:s>0?pe:ge}function C(e,t){if(t===0)return e;const n=Math.PI/180*t,s=e[0]*Math.cos(n)+e[1]*Math.sin(n),u=e[1]*Math.cos(n)-e[0]*Math.sin(n);return[s,u]}function he(e,t){const n=i=>{const a="touches"in i;a&&i.touches.length>1||e((c,g)=>{g.trackMouse&&!a&&(document.addEventListener(k,s),document.addEventListener(U,d));const{clientX:v,clientY:_}=a?i.touches[0]:i,m=C([v,_],g.rotationAngle);return g.onTouchStartOrOnMouseDown&&g.onTouchStartOrOnMouseDown({event:i}),Object.assign(Object.assign(Object.assign({},c),N),{initial:m.slice(),xy:m,start:i.timeStamp||0})})},s=i=>{e((a,c)=>{const g="touches"in i;if(g&&i.touches.length>1)return a;if(i.timeStamp-a.start>c.swipeDuration)return a.swiping?Object.assign(Object.assign({},a),{swiping:!1}):a;const{clientX:v,clientY:_}=g?i.touches[0]:i,[m,x]=C([v,_],c.rotationAngle),O=m-a.xy[0],b=x-a.xy[1],y=Math.abs(O),P=Math.abs(b),A=(i.timeStamp||0)-a.start,ne=Math.sqrt(y*y+P*P)/(A||1),se=[O/(A||1),b/(A||1)],S=me(y,P,O,b),V=typeof c.delta=="number"?c.delta:c.delta[S.toLowerCase()]||w.delta;if(y<V&&P<V&&!a.swiping)return a;const L={absX:y,absY:P,deltaX:O,deltaY:b,dir:S,event:i,first:a.first,initial:a.initial,velocity:ne,vxvy:se};L.first&&c.onSwipeStart&&c.onSwipeStart(L),c.onSwiping&&c.onSwiping(L);let M=!1;return(c.onSwiping||c.onSwiped||c[`onSwiped${S}`])&&(M=!0),M&&c.preventScrollOnSwipe&&c.trackTouch&&i.cancelable&&i.preventDefault(),Object.assign(Object.assign({},a),{first:!1,eventData:L,swiping:!0})})},u=i=>{e((a,c)=>{let g;if(a.swiping&&a.eventData){if(i.timeStamp-a.start<c.swipeDuration){g=Object.assign(Object.assign({},a.eventData),{event:i}),c.onSwiped&&c.onSwiped(g);const v=c[`onSwiped${g.dir}`];v&&v(g)}}else c.onTap&&c.onTap({event:i});return c.onTouchEndOrOnMouseUp&&c.onTouchEndOrOnMouseUp({event:i}),Object.assign(Object.assign(Object.assign({},a),N),{eventData:g})})},p=()=>{document.removeEventListener(k,s),document.removeEventListener(U,d)},d=i=>{p(),u(i)},f=(i,a)=>{let c=()=>{};if(i&&i.addEventListener){const g=Object.assign(Object.assign({},w.touchEventOptions),a.touchEventOptions),v=[[fe,n,g],[de,s,Object.assign(Object.assign({},g),a.preventScrollOnSwipe?{passive:!1}:{})],[_e,u,g]];v.forEach(([_,m,x])=>i.addEventListener(_,m,x)),c=()=>v.forEach(([_,m])=>i.removeEventListener(_,m))}return c},E={ref:i=>{i!==null&&e((a,c)=>{if(a.el===i)return a;const g={};return a.el&&a.el!==i&&a.cleanUpTouch&&(a.cleanUpTouch(),g.cleanUpTouch=void 0),c.trackTouch&&i&&(g.cleanUpTouch=f(i,c)),Object.assign(Object.assign(Object.assign({},a),{el:i}),g)})}};return t.trackMouse&&(E.onMouseDown=n),[E,f]}function ve(e,t,n,s){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==n.preventScrollOnSwipe||t.touchEventOptions.passive!==n.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:s(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:s(e.el,t)})}function Oe(e){const{trackMouse:t}=e,n=l.useRef(Object.assign({},N)),s=l.useRef(Object.assign({},w)),u=l.useRef(Object.assign({},s.current));u.current=Object.assign({},s.current),s.current=Object.assign(Object.assign({},w),e);let p;for(p in w)s.current[p]===void 0&&(s.current[p]=w[p]);const[d,f]=l.useMemo(()=>he(h=>n.current=h(n.current,s.current),{trackMouse:t}),[t]);return n.current=ve(n.current,s.current,u.current,f),d}const Y=()=>o(()=>import("./DoorUI-C-uGVzmv.js"),__vite__mapDeps([0,1,2])),Ee=l.lazy(Y),H=()=>o(()=>import("./ScratchReveal-BbIMmHZX.js"),__vite__mapDeps([3,1,2])),xe=l.lazy(H),G=()=>o(()=>import("./DumplingFillingUI-C8hTqcWH.js"),__vite__mapDeps([4,1,2,5])),je=l.lazy(G),K=()=>o(()=>import("./DumplingGivingUI-C3oOW_my.js"),__vite__mapDeps([6,1,2,5,7])),be=l.lazy(K),we=()=>o(()=>import("./LoveLanguagesUI-CWzqh-7V.js"),__vite__mapDeps([7,1,2])),T=l.lazy(we),q=()=>o(()=>import("./StoryEndPage-CxfpQYFT.js"),__vite__mapDeps([8,1,2]));l.lazy(q);const z=Object.assign({"/src/assets/pages/pg_0.png":()=>o(()=>import("./pg_0-C9kKzQ9e.js"),[]),"/src/assets/pages/pg_1.png":()=>o(()=>import("./pg_1-ERYTYsNx.js"),[]),"/src/assets/pages/pg_10.png":()=>o(()=>import("./pg_10-Bh0HdBaP.js"),[]),"/src/assets/pages/pg_11.png":()=>o(()=>import("./pg_11-BBfGdQWL.js"),[]),"/src/assets/pages/pg_12.png":()=>o(()=>import("./pg_12-DkDgt7GE.js"),[]),"/src/assets/pages/pg_13.png":()=>o(()=>import("./pg_13-DZEQP-hx.js"),[]),"/src/assets/pages/pg_14.png":()=>o(()=>import("./pg_14-Z2XBwkkw.js"),[]),"/src/assets/pages/pg_15.png":()=>o(()=>import("./pg_15-CvB1HR87.js"),[]),"/src/assets/pages/pg_16.png":()=>o(()=>import("./pg_16-An35zjFd.js"),[]),"/src/assets/pages/pg_17.png":()=>o(()=>import("./pg_17-CDFcGlzZ.js"),[]),"/src/assets/pages/pg_18.png":()=>o(()=>import("./pg_18-Dv8VxoX9.js"),[]),"/src/assets/pages/pg_19.png":()=>o(()=>import("./pg_19--1kQOyIX.js"),[]),"/src/assets/pages/pg_2.png":()=>o(()=>import("./pg_2-DxIO-mrO.js"),[]),"/src/assets/pages/pg_20.png":()=>o(()=>import("./pg_20-DsJ7YKXA.js"),[]),"/src/assets/pages/pg_21.png":()=>o(()=>import("./pg_21-semOzazQ.js"),[]),"/src/assets/pages/pg_22.png":()=>o(()=>import("./pg_22-0xN4vy0Q.js"),[]),"/src/assets/pages/pg_23.png":()=>o(()=>import("./pg_23-CSrCvE-W.js"),[]),"/src/assets/pages/pg_24.png":()=>o(()=>import("./pg_24-iM1z4pdo.js"),[]),"/src/assets/pages/pg_25.png":()=>o(()=>import("./pg_25-B3Zm7Zh9.js"),[]),"/src/assets/pages/pg_26.png":()=>o(()=>import("./pg_26-CqJmuRGx.js"),[]),"/src/assets/pages/pg_27.png":()=>o(()=>import("./pg_27-DVw06af_.js"),[]),"/src/assets/pages/pg_28.png":()=>o(()=>import("./pg_28-DukaBEc3.js"),[]),"/src/assets/pages/pg_29.png":()=>o(()=>import("./pg_29-BhRasWs7.js"),[]),"/src/assets/pages/pg_3.png":()=>o(()=>import("./pg_3-DzOvmfVh.js"),[]),"/src/assets/pages/pg_30.png":()=>o(()=>import("./pg_30-D4Cf6KWd.js"),[]),"/src/assets/pages/pg_31.png":()=>o(()=>import("./pg_31-B029ovnW.js"),[]),"/src/assets/pages/pg_32.png":()=>o(()=>import("./pg_32-QJtPaVXn.js"),[]),"/src/assets/pages/pg_33.png":()=>o(()=>import("./pg_33-CTX8h4ya.js"),[]),"/src/assets/pages/pg_4.png":()=>o(()=>import("./pg_4-DqITQBtt.js"),[]),"/src/assets/pages/pg_5.png":()=>o(()=>import("./pg_5-DpS5woq4.js"),[]),"/src/assets/pages/pg_6.png":()=>o(()=>import("./pg_6-Cddvn-5L.js"),[]),"/src/assets/pages/pg_7.png":()=>o(()=>import("./pg_7-Brun2mv9.js"),[]),"/src/assets/pages/pg_8.png":()=>o(()=>import("./pg_8-BKfY39WA.js"),[]),"/src/assets/pages/pg_9.png":()=>o(()=>import("./pg_9-BJVpGV9S.js"),[])}),ye=()=>{const{currentPage:e,numPages:t,nextIsActive:n,handleBack:s,handleNext:u,toggleNext:p,direction:d}=I(),[f,h]=l.useState({});if(isNaN(e)||e<0||e>t)return r.jsx(oe,{to:"/not-found",replace:!0});const E=Oe({onSwipedLeft:()=>u(),onSwipedRight:()=>s()});l.useEffect(()=>{const _=m=>{m.key==="ArrowLeft"?s():m.key==="ArrowRight"&&u()};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[e,n]),l.useEffect(()=>{p(![3,5,15,17].includes(e))},[e]);const i=async _=>{const m=`/src/assets/pages/pg_${_}.png`;return z[m]?(await z[m]()).default:(console.log(`No image found for page: ${_}`),"")},a={3:Y,5:H,15:G,17:K,32:q};l.useEffect(()=>{(async()=>{const m=Array.from({length:5},(O,b)=>e-2+b),x={...f};for(const O of m)O>=0&&O<=t&&!x[O]&&(x[O]=await i(O)),a[O]&&a[O]();h(x)})()},[e]);const c=[4,6,16].includes(e),g=()=>c?{enter:()=>({opacity:0}),center:{opacity:1},exit:()=>({opacity:0})}:{enter:_=>({scale:.5,x:_>0?"100%":"-100%",opacity:0}),center:{scale:1,x:0,opacity:1},exit:_=>({scale:.5,x:_>0?"-100%":"100%",opacity:0})},v=()=>c?{ease:"easeOut",duration:.2}:{type:"spring",stiffness:500,damping:30,mass:.5,duration:.2};return r.jsx("div",{...E,children:r.jsx(F,{custom:d,initial:!1,children:f[e]?r.jsxs(W.div,{className:"absolute w-full h-full",custom:d,variants:g(),initial:"enter",animate:"center",exit:"exit",transition:v(),children:[r.jsx("img",{src:f[e],className:"object-contain pointer-events-none"}),e===3&&r.jsx(Ee,{}),e===5&&r.jsx(xe,{}),e===15&&r.jsx(je,{}),e===17&&r.jsx(be,{}),e===20&&r.jsx(T,{}),e===28&&r.jsx(T,{}),e===29&&r.jsx(T,{}),e===30&&r.jsx(T,{}),e===31&&r.jsx(T,{})]},e):r.jsx("p",{children:"Loading..."})})})};var J={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},B=j.createContext&&j.createContext(J),Pe=["attr","size","title"];function Te(e,t){if(e==null)return{};var n=Ie(e,t),s,u;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(u=0;u<p.length;u++)s=p[u],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Ie(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},D.apply(this,arguments)}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,s)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(s){Le(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Le(e,t,n){return t=De(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e){var t=Re(e,"string");return typeof t=="symbol"?t:t+""}function Re(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q(e){return e&&e.map((t,n)=>j.createElement(t.tag,R({key:n},t.attr),Q(t.child)))}function Z(e){return t=>j.createElement(Ae,D({attr:R({},e.attr)},t),Q(e.child))}function Ae(e){var t=n=>{var{attr:s,size:u,title:p}=e,d=Te(e,Pe),f=u||n.size||"1em",h;return n.className&&(h=n.className),e.className&&(h=(h?h+" ":"")+e.className),j.createElement("svg",D({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,d,{className:h,style:R(R({color:e.color||n.color},n.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),p&&j.createElement("title",null,p),e.children)};return B!==void 0?j.createElement(B.Consumer,null,n=>t(n)):t(J)}function Se(e){return Z({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"},child:[]}]})(e)}function Ne(e){return Z({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"},child:[]}]})(e)}const ee=()=>{const{handleBack:e,backIsActive:t,currentPage:n}=I();return r.jsx("button",{onClick:e,children:r.jsx("span",{className:`flex w-12 h-12 items-center justify-center rounded-full transition
        ${n===0&&"opacity-0 "}
        ${t?"text-sky-300  hover:text-sky-500 active:text-sky-500 cursor-pointer":"text-gray-200 cursor-not-allowed"}
      `,style:{strokeWidth:13},children:Se({size:58})})})},te=()=>{const{handleNext:e,nextIsActive:t}=I();return r.jsx("button",{onClick:e,children:r.jsx("span",{className:`flex w-12 h-12 items-center justify-center rounded-full transition
        ${t?"text-sky-300  hover:text-sky-500 active:text-sky-500 cursor-pointer":"text-gray-200 cursor-not-allowed"}
      `,style:{strokeWidth:13},children:Ne({size:58})})})},Ve=()=>{const{currentPage:e,numPages:t}=I(),n=Math.round(e/t*100);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-gray-100 h-2",children:r.jsx("div",{className:"bg-blue-primary h-full transition-all",style:{width:`${n}%`}})}),r.jsx("div",{className:"flex flex-col justify-center w-full h-12 progress-height-portrait bg-white",children:r.jsxs("div",{className:"flex flex-row justify-center items-center",children:[r.jsx("div",{className:"hidden show-portrait scale-75",children:r.jsx(ee,{})}),r.jsxs("p",{className:"w-36 text-center",children:["Page ",e," of ",t]}),r.jsx("div",{className:"hidden show-portrait scale-75",children:r.jsx(te,{})})]})})]})};function Me({onMiddleClick:e}){return l.useEffect(()=>{const t=n=>{const{clientX:s,clientY:u}=n,p=window.innerWidth,d=window.innerHeight,f=p*.3,h=p*.7,E=d*.3,i=d*.7;s>=f&&s<=h&&u>=E&&u<=i&&(e==null||e())};return window.addEventListener("click",t),()=>window.removeEventListener("click",t)},[e]),null}const ke=()=>{const[e,t]=l.useState(!1),{currentPage:n}=I();l.useEffect(()=>{if(!e)return;const u=setTimeout(()=>{t(!1)},3e3);return()=>clearTimeout(u)},[e]),l.useEffect(()=>{t(!1)},[n]);const s={enter:{y:"-100%",opacity:0},visible:{y:0,opacity:1},exit:{y:"-100%",opacity:0}};return r.jsxs(r.Fragment,{children:[r.jsx(Me,{onMiddleClick:()=>t(!e)}),r.jsx(F,{children:e&&r.jsx(W.div,{variants:s,initial:"enter",animate:"visible",exit:"exit",transition:{duration:.3,ease:"easeOut"},className:"absolute top-0 w-full z-50",children:r.jsx(ae,{})})})]})};function Ue(){l.useEffect(()=>(document.body.classList.add("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}),[]);const e=l.useRef(null),[t,n]=l.useState(!0);return l.useEffect(()=>{const s=new ResizeObserver(([u])=>{const{width:p,height:d}=u.contentRect;n(p>d)});return e.current&&s.observe(e.current),()=>s.disconnect()},[]),r.jsx("div",{className:"w-screen h-[100dvh] flex flex-col ",children:r.jsxs(ce,{children:[r.jsx(ke,{}),r.jsxs("section",{ref:e,className:"flex w-full min-h-0 h-full items-center justify-evenly select-none z-0",children:[r.jsx("span",{className:"hide-portrait",children:r.jsx(ee,{})}),r.jsx("div",{className:`relative  border-blue-tertiary overflow-clip aspect-square shadow-[3px_0_3px_-2px_rgba(0,0,0,0.1),_-3px_0_3px_-2px_rgba(0,0,0,0.1)]
              ${t?"h-full":"w-full"}`,children:r.jsx(ye,{})}),r.jsx("span",{className:" hide-portrait ",children:r.jsx(te,{})})]}),r.jsx("div",{className:"shrink-0",children:r.jsx(Ve,{})})]})})}const ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"}));export{ze as R,I as u};
