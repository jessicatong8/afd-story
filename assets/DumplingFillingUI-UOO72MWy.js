import{j as e,A as j,m as S,u as _,r as i}from"./index-CZzZvyL7.js";import{u as b,a as F,C as I,b as N,c as B,D as E,r as k,T as A,M as G}from"./modifiers.esm-DVPvx1JH.js";import{u as P}from"./ReadPage-ernNwvyD.js";const R="data:image/svg+xml,%3csvg%20width='780'%20height='593'%20viewBox='0%200%20780%20593'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_f_1869_982)'%3e%3cpath%20d='M605%20324C608%20379%20692.041%20362.5%20716.5%20367.5C715%20374.5%20697.839%20387.469%20691%20397.5C679.5%20437.5%20691%20508.5%20691%20508.5C642%20532.5%20618.5%20549.999%20556.5%20561.999C527.128%20570.192%20490.89%20585.049%20441%20586.999C287.5%20592.999%20174.22%20581.572%2083.0798%20521.999C17.3975%20512.325%207.00042%20471%2015.0004%20438C15.0004%20438%2036.6604%20436.604%2040.0004%20415C46.0004%20393.5%2017.8967%20349.038%204.00042%20334.5C4.00042%20334.5%2051.0004%20368%2083.0798%20370C103.52%20365.81%20137.5%20304.522%20130.432%20304.522C133.645%20309.126%20161.909%20292.257%20180%20269C198%20247.5%20203.706%20232.629%20181.5%20210C181.5%20210%20239%20183%20243%20161.5C223%20119%20130%2054.0001%20130%2054.0001C144.788%2047.6299%20155.5%2041.0001%20198%2037.5001C249.072%2025.7735%20335%202.49988%20383%205.49982C479.5%205.49981%20576.5%20-3.00012%20649.78%2026.5178C712.5%2059.4999%20764.5%2088%20775.5%20106.5C775.5%20106.5%20759%20207%20730.5%20228.5C690%20291.5%20599%20303.5%20605%20324Z'%20fill='%23FFEC5B'%20fill-opacity='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_f_1869_982'%20x='0.000488281'%20y='0.364258'%20width='779.5'%20height='592.056'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeGaussianBlur%20stdDeviation='2'%20result='effect1_foregroundBlur_1869_982'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",T=({dragging:t})=>{const{isOver:o,setNodeRef:n}=b({id:"dumpling-wrapper"});return e.jsx("div",{ref:n,className:`w-3/4 h-auto absolute top-[29%] left-[10%] transition-transform
        ${o?"scale-110":"scale-105"}
    ${t?"opacity-100":"opacity-0"}
  `,children:e.jsx("img",{src:R,className:"pointer-events-none"})})},U="/afd-story/assets/happy-BJwc4hrh.png",$="/afd-story/assets/heart-G2MiLKKE.png",z="/afd-story/assets/time-BzmDQ3A9.png",M=({id:t,activeID:o,dropped:n,completed:l})=>{const c=t===o,r=n[t],{attributes:a,listeners:g,setNodeRef:p,transform:u,isDragging:f}=F({id:t,disabled:r}),m={transform:I.Translate.toString(u)},h=["top-[15%] left-[25%]","top-[12%] left-[50%]","top-[15%] left-[75%]"],x=["top-[40%] left-[50%] transition-none scale-100","top-[58%] left-[60%] transition-none scale-100","top-[70%] left-[40%] transition-none scale-100"],C=[U,$,z],s=h[t],d=x[t],v=()=>l&&{scale:[1,1.5,0]};return e.jsx(j,{children:e.jsxs(S.div,{animate:v(),transition:{delay:.2,duration:.5},ref:p,style:m,...g,...a,className:`w-1/5 h-1/5 rounded-full absolute -translate-x-[50%] -translate-y-[50%] z-10 cursor-grab scale-75 hover:scale-100
        ${c||r?d:s}
         ${f?"scale-100 transition-none cursor-grabbing":"transition-transform"}
     `,children:[e.jsx("img",{src:C[t],className:"absolute w-full h-auto z-20 pointer-events-none"}),e.jsxs("svg",{className:`absolute w-full h-auto z-10 animate-pulse-fast hover:animate-none
          ${f||c||r?"invisible":""}
        `,width:"152",height:"152",viewBox:"0 0 152 152",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{filter:"url(#filter0_f_2237_940)",children:[e.jsx("circle",{cx:"76",cy:"76",r:"62",fill:"white"}),e.jsx("circle",{cx:"76",cy:"76",r:"67",stroke:"#FFEC5B","stroke-opacity":"0.7","stroke-width":"8"})]}),e.jsx("defs",{children:e.jsxs("filter",{id:"filter0_f_2237_940",x:"0",y:"0",width:"152",height:"152",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB",children:[e.jsx("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),e.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),e.jsx("feGaussianBlur",{stdDeviation:"2",result:"effect1_foregroundBlur_2237_940"})]})})]})]})})},L=()=>{const{toggleNext:t,toggleBack:o}=P(),n=_(),l=[{id:0},{id:1},{id:2}],[c,r]=i.useState(-1),[a,g]=i.useState(()=>Array(l.length).fill(!1)),[p,u]=i.useState(!1),[f,m]=i.useState(!1),h=s=>{u(!0),o(!1)},x=s=>{const{active:d,over:v}=s;if(u(!1),setTimeout(()=>{o(!0)},200),d&&v){const w=Number(d.id);r(w),g(y=>{const D=[...y];return D[w]=!0,D})}};i.useEffect(()=>{a.every(Boolean)&&(m(!0),t(!0),setTimeout(()=>{n("/read/16")},600))},[a]);const C=N(B(G),B(A));return e.jsxs(E,{modifiers:[k],sensors:C,onDragStart:h,onDragEnd:x,children:[l.map(s=>e.jsx(M,{id:s.id,activeID:c,dropped:a,completed:f},s.id)),e.jsx(T,{dragging:p})]})};export{L as default};
